<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Interactive Dictionary</title>
  <style>
    body { font-family: sans-serif; margin: 20px; }
    .hidden { display: none; }
    .tabs button { margin-right: 10px; padding: 6px 12px; }
    .entry { border: 1px solid #ccc; padding: 8px; margin-bottom: 8px; }
    .gray { color: gray; font-style: italic; }
    canvas { max-width: 400px; margin-top: 20px; }
    #mockEtymologyChart, #mockWordCloud { margin-top: 20px; }
  </style>
</head>
<body>

  <h1>Interactive Dictionary</h1>
  <div class="tabs">
    <button onclick="showTab('dictionary')">Dictionary</button>
    <button onclick="showTab('admin')">Admin Panel</button>
    <button onclick="showTab('analysis')">Analysis</button>
    <button onclick="loadCSV()">Import CSV</button>
  </div>

  <div id="dictionary" class="tab">
    <h2>Dictionary</h2>
    <div id="dictionaryList"></div> <!-- This is where the dictionary entries will appear -->
  </div>

  <div id="admin" class="tab hidden">
    <h2>Admin Panel</h2>
    <div id="adminList"></div> <!-- This is where the editable dictionary entries will appear -->
  </div>

  <div id="analysis" class="tab hidden">
    <h2>Analysis</h2>
    <h3>Mock Pie Chart (Etymology)</h3>
    <div id="mockEtymologyChart" style="width: 300px; height: 300px; background: #f0f0f0; display: flex; justify-content: center; align-items: center;">
      <span style="font-size: 24px;">Mock Pie Chart</span>
    </div>

    <h3>Mock Word Cloud</h3>
    <div id="mockWordCloud" style="font-size: 18px; line-height: 1.5;">
      <span style="font-size: 30px; margin-right: 10px;">Agriculture</span> 
      <span style="font-size: 24px; margin-right: 10px;">Humor</span> 
      <span style="font-size: 20px; margin-right: 10px;">Daily Life</span> 
      <span style="font-size: 18px; margin-right: 10px;">Technology</span>
      <span style="font-size: 22px; margin-right: 10px;">Food</span>
    </div>
  </div>

  <script>
    // Sample CSV Data (mock data for demo purposes)
    const sampleCSV = `word,meaning,etymology,topic
    apple,a fruit,germanic,daily life
    tractor,a farm vehicle,slavic,agriculture
    joke,something funny,romance,humor
    computer,an electronic device,latin,technology
    book,a set of written or printed pages,germanic,daily life`;

    // Default dictionary entries
    let entries = [
      { word: "apple", meaning: "a fruit", etymology: "germanic", topic: "daily life", status: "none", editedVersion: "" },
      { word: "tractor", meaning: "a farm vehicle", etymology: "slavic", topic: "agriculture", status: "none", editedVersion: "" },
      { word: "joke", meaning: "something funny", etymology: "romance", topic: "humor", status: "none", editedVersion: "" },
      { word: "computer", meaning: "an electronic device", etymology: "latin", topic: "technology", status: "none", editedVersion: "" },
      { word: "book", meaning: "a set of written or printed pages", etymology: "germanic", topic: "daily life", status: "none", editedVersion: "" }
    ];

    // Render dictionary entries immediately on page load
    renderDictionary();

    // Render word cloud immediately on page load (only once)
    renderWordCloud();

    // Function to display the selected tab
    function showTab(tab) {
      document.querySelectorAll('.tab').forEach(el => el.classList.add('hidden')); // Hide all tabs
      document.getElementById(tab).classList.remove('hidden'); // Show the selected tab
      if (tab === 'dictionary') renderDictionary(); // Render dictionary when it's selected
      if (tab === 'admin') renderAdmin(); // Render admin panel when it's selected
      if (tab === 'analysis') renderAnalysis(); // Render analysis when it's selected
    }

    // Function to load the CSV data into the entries array (if needed)
    function loadCSV() {
      const lines = sampleCSV.trim().split('\n'); // Split the CSV by newlines
      const headers = lines[0].split(','); // Get the header names from the first line
      entries = lines.slice(1).map(line => {
        const parts = line.split(','); // Split each entry by commas
        const obj = {};
        headers.forEach((h, i) => obj[h] = parts[i]); // Create an object for each entry
        obj.status = 'none'; // Initial status (none)
        obj.editedVersion = ''; // No edited version yet
        return obj;
      });
      alert('Sample CSV loaded!'); // Notify user
      renderDictionary(); // Re-render the dictionary with the new data
    }

    // Function to render dictionary entries
    function renderDictionary() {
      const list = document.getElementById('dictionaryList');
      list.innerHTML = ''; // Clear the current list
      entries.forEach((entry, i) => {
        const div = document.createElement('div');
        div.className = 'entry';
        div.innerHTML = `
          <strong>${entry.word}</strong>. ${entry.meaning}
          <br><button onclick="editEntry(${i})">Edit</button>
        `;
        list.appendChild(div); // Add each entry to the list
      });
    }

    // Function to render admin panel entries
    function renderAdmin() {
      const list = document.getElementById('adminList');
      list.innerHTML = ''; // Clear the current list
      entries.forEach((entry, i) => {
        const div = document.createElement('div');
        div.className = 'entry';
        div.innerHTML = `
          <strong>${entry.word}</strong>. ${entry.meaning}
          <br><button onclick="editEntry(${i})">Edit</button>
          ${entry.status === 'pending' ? `
            <button onclick="confirmEdit(${i})">Confirm</button>
            <button onclick="rejectEdit(${i})">Reject</button>
          ` : ''}
        `;
        list.appendChild(div); // Add each entry to the list
      });
    }

    // Function to handle editing an entry
    function editEntry(i) {
      const newMeaning = prompt('Enter new meaning:', entries[i].meaning); // Prompt for a new meaning
      if (newMeaning && newMeaning !== entries[i].meaning) {
        entries[i].editedVersion = `${entries[i].word}. ${newMeaning}`; // Save the edited version
        entries[i].status = 'pending'; // Mark as pending
        renderDictionary(); // Re-render the dictionary with the updated data
      }
    }

    // Function to confirm an edit
    function confirmEdit(i) {
      const parts = entries[i].editedVersion.split('. ');
      entries[i].meaning = parts.slice(1).join('. '); // Update the meaning with the edited version
      entries[i].editedVersion = ''; // Clear the edited version
      entries[i].status = 'confirmed'; // Mark as confirmed
      renderAdmin(); // Re-render the admin panel
      renderDictionary(); // Re-render the dictionary
    }

    // Function to reject an edit
    function rejectEdit(i) {
      entries[i].editedVersion = ''; // Clear the edited version
      entries[i].status = 'none'; // Reset the status
      renderAdmin(); // Re-render the admin panel
      renderDictionary(); // Re-render the dictionary
    }

    // Function to render the analysis page (mock data)
    function renderAnalysis() {
      // Analysis rendering logic here if needed
    }

    // Function to render the word cloud (only once on page load)
    function renderWordCloud() {
      const topicsDiv = document.getElementById('mockWordCloud');
      topicsDiv.innerHTML = `
        <span style="font-size: 30px; margin-right: 10px;">Agriculture</span> 
        <span style="font-size: 24px; margin-right: 10px;">Humor</span> 
        <span style="font-size: 20px; margin-right: 10px;">Daily Life</span> 
        <span style="font-size: 18px; margin-right: 10px;">Technology</span>
        <span style="font-size: 22px; margin-right: 10px;">Food</span>
      `;
    }
  </script>
</body>
</html>
